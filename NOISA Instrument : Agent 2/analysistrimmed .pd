#N canvas 468 212 1047 619 10;
#X obj 191 -29 mspec~;
#X obj 194 -72 rfft~;
#X obj -59 16 ss~;
#X floatatom -60 37 15 0 0 0 - - -;
#X text 243 -37 Get magnitude spectrum from fft. Argument of 2 gives
power spectrum.;
#X text 252 11 Get spectral peaks from magnitudes and estimate frequency.
Argumnent or right inlet sets threshold as percentage of the maximum
peak detected in each frame;
#X obj -60 57 average 50;
#X floatatom -56 124 5 0 0 0 - - -;
#X obj 713 -137 energy;
#X obj 715 -109 hsl 100 20 0 0.1 0 0 empty empty 0___________0.1 -2
-8 0 10 -262144 -1 -1 0 1;
#X msg 751 -160 lt 27;
#X msg 751 -179 st 6;
#X text 725 -87 energy levels;
#X floatatom 693 -49 10 0 0 0 - - -;
#X obj 192 32 peak~ 40;
#X text 679 -27 191 = 440 Osc;
#X obj 676 249 gravmagspec;
#X floatatom 677 271 5 0 0 0 - - -;
#X obj 677 290 average;
#X obj 678 312 int;
#X floatatom 680 336 5 0 0 0 - - -;
#X obj 768 215 vsl 20 128 20 20000 0 0 empty empty empty 0 -9 0 10
-262144 -1 -1 0 1;
#X text 744 -73 Useful to draw attack and decay;
#X text 796 333 20hz;
#X text 793 207 20 \, 000hz;
#X text 305 -172 Analysis Tool;
#X text -77 167 0 = White Noise -3 = 440 Sine;
#X text 591 355 Doubles the value with sine waves \, only starts working
from 250 onwards;
#X text 641 204 Spectral Centroid:;
#X text -28 10 Spectral Smoothness;
#X text 692 -176 Energy;
#X obj -10 338 f;
#X obj 103 294 bang;
#X obj 71 249 inlet;
#X obj 104 332 f;
#X obj 199 335 f;
#X text -69 -37 comment;
#X obj 323 -130 inlet~;
#X obj 253 360 f;
#X floatatom 1006 576 5 0 0 0 BPM - -;
#X floatatom 1062 667 5 0 0 3 acceleration_BPM - -;
#X obj 1017 528 unpack;
#X floatatom 1057 548 5 0 0 1 ms - -;
#X obj 937 464 tempoest2;
#X obj 1008 455 pack 0 0;
#X obj 1009 432 t b f;
#N canvas 904 241 189 260 acceleration 0;
#X obj 48 203 outlet;
#X obj 48 179 avg4pt2;
#X obj 48 17 inlet;
#X obj 46 116 route 0 1;
#X obj 46 69 f;
#X obj 77 69 + 1;
#X obj 110 70 mod 2;
#X obj 47 156 -;
#X obj 47 45 t b f b;
#X obj 80 138 t b f;
#X obj 47 94 pack;
#X connect 1 0 0 0;
#X connect 2 0 8 0;
#X connect 3 0 7 0;
#X connect 3 1 9 0;
#X connect 4 0 5 0;
#X connect 4 0 10 0;
#X connect 5 0 6 0;
#X connect 6 0 4 1;
#X connect 7 0 1 0;
#X connect 8 0 4 0;
#X connect 8 1 10 1;
#X connect 8 2 4 0;
#X connect 9 0 7 0;
#X connect 9 1 7 1;
#X connect 9 1 10 1;
#X connect 10 0 3 0;
#X restore 1072 622 pd acceleration;
#X obj 591 631 spigot;
#X obj 591 610 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X obj 591 657 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X obj 656 658 tgl 15 0 empty empty empty 0 -6 0 8 -262144 -1 -1 0
1;
#X obj 591 471 vsl 15 128 0 127 0 0 empty empty empty 0 -8 0 8 -262144
-1 -1 0 1;
#X msg 547 476 0;
#X msg 613 476 50;
#X obj 689 604 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -6 0 10
-262144 -1 -1 0 256;
#X text 677 612 threshold - if no activity for x seconds \, reopen
the spigot;
#X obj 656 631 del 200;
#X msg 658 706 1;
#X obj 691 705 -;
#X obj 691 737 tgl 15 0 empty empty empty 0 -6 0 8 -262144 -1 -1 0
1;
#X obj 657 684 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X text 662 763 1 if active \, 0 if not;
#X obj 862 685 sel 1;
#X floatatom 1286 605 5 0 0 0 - - -;
#X obj 1231 568 average 10;
#X obj 1021 770 r bang slider;
#X obj 448 667 loadbang;
#X msg 690 526 300;
#X obj 719 466 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 439 609 sel 1;
#X msg 351 587 1;
#X text 1273 621 ms Average;
#X obj 732 37 rmstodb;
#X floatatom 741 101 5 0 0 0 - - -;
#X obj 156 691 list trim;
#X obj -35 509 list prepend;
#X floatatom -40 361 5 0 0 0 - - -;
#X floatatom 92 362 5 0 0 0 - - -;
#X msg -46 415 smoothness \$1;
#X msg 94 416 centroid \$1;
#X floatatom 108 438 5 0 0 0 - - -;
#X msg 69 490 energy \$1;
#X obj 149 660 list prepend send /agent3;
#X obj 22 579 list prepend;
#X msg 147 530 tempo \$1;
#X floatatom 166 479 5 0 0 0 - - -;
#X msg 363 662 attack \$1;
#X obj 169 729 outlet;
#X obj -38 465 list prepend;
#X obj -39 389 change;
#X obj 91 388 change;
#X obj 85 468 change;
#X obj 157 504 change;
#X obj 382 630 change;
#X obj 348 693 prepend send /agent3;
#X obj 343 724 outlet;
#X connect 0 0 14 0;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 1 1 0 1;
#X connect 2 0 3 0;
#X connect 3 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 31 1;
#X connect 8 0 9 0;
#X connect 8 0 13 0;
#X connect 10 0 8 1;
#X connect 11 0 8 1;
#X connect 13 0 72 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 19 0 21 0;
#X connect 20 0 34 1;
#X connect 31 0 76 0;
#X connect 32 0 31 0;
#X connect 32 0 34 0;
#X connect 32 0 35 0;
#X connect 32 0 38 0;
#X connect 33 0 32 0;
#X connect 34 0 77 0;
#X connect 35 0 80 0;
#X connect 37 0 8 0;
#X connect 37 0 16 0;
#X connect 37 0 1 0;
#X connect 38 0 85 0;
#X connect 41 0 39 0;
#X connect 41 1 42 0;
#X connect 41 1 64 0;
#X connect 43 0 44 0;
#X connect 43 0 46 0;
#X connect 43 1 45 0;
#X connect 44 0 41 0;
#X connect 45 0 44 0;
#X connect 45 1 44 1;
#X connect 46 0 40 0;
#X connect 47 0 49 0;
#X connect 48 0 47 0;
#X connect 49 0 50 0;
#X connect 49 0 56 0;
#X connect 50 0 47 1;
#X connect 50 0 58 1;
#X connect 50 0 60 0;
#X connect 51 0 48 0;
#X connect 52 0 51 0;
#X connect 53 0 51 0;
#X connect 54 0 56 1;
#X connect 56 0 50 0;
#X connect 57 0 58 0;
#X connect 58 0 59 0;
#X connect 59 0 62 0;
#X connect 59 0 69 0;
#X connect 60 0 57 0;
#X connect 62 0 43 0;
#X connect 63 0 38 1;
#X connect 64 0 63 0;
#X connect 65 0 48 0;
#X connect 66 0 50 0;
#X connect 66 0 68 0;
#X connect 67 0 54 0;
#X connect 68 0 67 0;
#X connect 69 0 93 0;
#X connect 70 0 93 0;
#X connect 72 0 73 0;
#X connect 72 0 35 1;
#X connect 74 0 87 0;
#X connect 75 0 83 0;
#X connect 76 0 89 0;
#X connect 77 0 90 0;
#X connect 78 0 88 1;
#X connect 79 0 88 0;
#X connect 80 0 91 0;
#X connect 81 0 75 1;
#X connect 82 0 74 0;
#X connect 83 0 82 0;
#X connect 84 0 83 1;
#X connect 85 0 92 0;
#X connect 86 0 94 0;
#X connect 88 0 75 0;
#X connect 89 0 78 0;
#X connect 90 0 79 0;
#X connect 91 0 81 0;
#X connect 92 0 84 0;
#X connect 93 0 86 0;
#X connect 94 0 95 0;
