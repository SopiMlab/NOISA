#N canvas 607 321 926 909 10;
#X floatatom 509 56 5 0 0 0 - transpo-set -;
#X floatatom 182 124 3 0 0 0 - speed-set -;
#X floatatom 70 126 7 0 0 0 - location-set -;
#N canvas 688 170 821 693 fft-analysis 0;
#X obj 51 477 *~;
#X obj 18 477 *~;
#X obj 18 499 -~;
#X obj 167 475 *~;
#X obj 136 475 *~;
#X obj 136 497 +~;
#X obj 109 193 *~;
#X obj 78 193 *~;
#X obj 50 193 *~;
#X obj 19 193 *~;
#X obj 19 218 +~;
#X obj 127 379 *~;
#X obj 20 622 *~;
#X obj 238 430 rfft~;
#X obj 108 161 rfft~;
#X obj 19 564 rifft~;
#X obj 21 646 outlet~;
#X obj 97 379 *~;
#X obj 97 401 +~;
#X obj 124 218 -~;
#X obj 18 431 *~;
#X obj 51 432 *~;
#X obj 127 622 r window-size;
#X obj 426 595 r window-size;
#X obj 426 644 block~;
#X obj 19 349 +~ 1e-15;
#X obj 19 598 *~;
#X obj 52 598 tabreceive~ \$0-hann;
#X obj 127 643 expr 2/(3*$f1);
#X obj 591 563 loadbang;
#X msg 591 589 \; pd dsp 1 \; window-size 2048 \; transpo 0 \; rewind
bang;
#X msg 426 619 set \$1 4;
#X obj 97 425 q8_rsqrt~;
#N canvas 743 162 1006 799 read-windows 0;
#X obj 18 693 *~;
#X obj 340 448 r window-size;
#X obj 166 303 f;
#X obj 102 91 r window-size;
#X obj 102 139 /;
#X obj 195 695 *~;
#X obj 166 252 bang~;
#X obj 17 551 line~;
#X obj 102 164 * 1000;
#X obj 288 222 r speed;
#X obj 187 276 r location;
#X obj 208 305 +;
#X obj 288 275 *;
#X obj 188 371 / 1000;
#X obj 166 394 *;
#X text 198 394 reading location (samples);
#X obj 51 597 / 4;
#X obj 288 245 * 0.01;
#X floatatom 340 498 7 0 0 0 - - -;
#X obj 340 474 *;
#X obj 499 365 r transpo;
#X obj 499 387 * 0.01;
#X obj 501 408 + 69;
#X obj 502 429 mtof;
#X obj 502 451 / 440;
#X obj 375 474 t b f;
#X obj 19 719 outlet~;
#X obj 195 720 outlet~;
#X obj 218 664 tabreceive~ \$0-hann;
#X obj 803 386 r location;
#X msg 803 409 0;
#X obj 803 432 s speed;
#X obj 768 508 r speed;
#X msg 768 532 set \$1;
#X obj 768 557 s speed-set;
#X text 411 498 stretched window size (samples);
#X obj 877 507 r transpo;
#X msg 877 533 set \$1;
#X obj 877 558 s transpo-set;
#X obj 808 94 r location;
#X msg 826 278 set \$1;
#X obj 808 140 t b f;
#X obj 826 257 f;
#X obj 754 171 int;
#X obj 754 203 sel 0;
#X msg 813 174 1;
#X msg 813 197 0;
#X obj 754 228 del 300;
#X obj 826 302 s location-set;
#X obj 17 637 tabread4~ \$0-sample;
#X obj 194 637 tabread4~ \$0-sample;
#X obj 188 347 r \$0-insamprate;
#X obj 528 586 r rewind;
#X msg 528 744 \; location \$1;
#X floatatom 111 187 5 0 0 0 - - -;
#X obj 102 115 t f b;
#X obj 142 139 samplerate~;
#X obj 102 208 / 4;
#X obj 243 309 s see-loc;
#X obj 817 116 r see-loc;
#X obj 203 420 / 2;
#X obj 166 420 -;
#X text 239 417 back up 1/2 window;
#X obj 16 597 -~;
#X text 43 6 Read two windows out of the recorded sample \, one 1/4
ahead of the other. The mid point of the front window is specified
by "location". If "speed" is nonzero \, "location" automatically precesses.
;
#X obj 528 720 * -0.5;
#X text 81 601 "back" window 1/4 cycle behind "front" one;
#X text 137 205 computation period (msec) for overlap of 4;
#X text 164 186 msec in a window;
#X obj 528 666 /;
#X obj 528 691 * 1000;
#X obj 528 642 t f b;
#X obj 568 666 samplerate~;
#X obj 528 619 f;
#X msg 845 711 \; rewind bang \; speed \$1;
#X obj 845 684 r auto;
#X obj 730 685 r no-detune;
#X text 326 275 loop to precess the location according;
#X text 325 291 to the "speed" parameter.;
#X text 611 31 if location changes \, update number box;
#X text 610 50 in main window via "location-set" \, but;
#X text 613 69 taking care to limit frequency of updates.;
#X text 756 462 reflect control changes;
#X text 756 479 in main window.;
#X text 754 344 setting location by hand;
#X text 752 362 sets speed to zero.;
#X text 760 653 misc controls;
#X text 496 527 "rewind" control takes us;
#X text 499 545 to a location depending on;
#X text 499 564 stretched window size.;
#X obj 16 469 f;
#X obj 17 496 pack;
#X obj 15 440 b;
#X msg 17 523 0 \, \$1 \$2;
#X msg 730 707 \; transpo 0;
#X connect 0 0 26 0;
#X connect 1 0 19 0;
#X connect 2 0 11 0;
#X connect 2 0 14 0;
#X connect 3 0 55 0;
#X connect 4 0 8 0;
#X connect 5 0 27 0;
#X connect 6 0 2 0;
#X connect 7 0 63 0;
#X connect 7 0 50 0;
#X connect 8 0 54 0;
#X connect 8 0 57 0;
#X connect 9 0 17 0;
#X connect 10 0 2 1;
#X connect 11 0 2 1;
#X connect 11 0 58 0;
#X connect 12 0 11 1;
#X connect 13 0 14 1;
#X connect 14 0 61 0;
#X connect 16 0 63 1;
#X connect 17 0 12 0;
#X connect 18 0 16 0;
#X connect 18 0 60 0;
#X connect 18 0 90 1;
#X connect 19 0 18 0;
#X connect 20 0 21 0;
#X connect 21 0 22 0;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 24 0 25 0;
#X connect 25 0 19 0;
#X connect 25 1 19 1;
#X connect 28 0 5 1;
#X connect 28 0 0 1;
#X connect 29 0 30 0;
#X connect 30 0 31 0;
#X connect 32 0 33 0;
#X connect 33 0 34 0;
#X connect 36 0 37 0;
#X connect 37 0 38 0;
#X connect 39 0 41 0;
#X connect 40 0 48 0;
#X connect 41 0 43 0;
#X connect 41 1 42 1;
#X connect 42 0 40 0;
#X connect 43 0 44 0;
#X connect 44 0 45 0;
#X connect 44 0 47 0;
#X connect 45 0 43 1;
#X connect 46 0 43 1;
#X connect 47 0 46 0;
#X connect 47 0 42 0;
#X connect 49 0 0 0;
#X connect 50 0 5 0;
#X connect 51 0 13 0;
#X connect 52 0 73 0;
#X connect 55 0 4 0;
#X connect 55 1 56 0;
#X connect 56 0 4 1;
#X connect 57 0 12 1;
#X connect 57 0 91 1;
#X connect 59 0 41 0;
#X connect 60 0 61 1;
#X connect 61 0 92 0;
#X connect 61 0 49 1;
#X connect 61 0 50 1;
#X connect 63 0 49 0;
#X connect 65 0 53 0;
#X connect 69 0 70 0;
#X connect 70 0 65 0;
#X connect 71 0 69 0;
#X connect 71 1 72 0;
#X connect 72 0 69 1;
#X connect 73 0 71 0;
#X connect 75 0 74 0;
#X connect 76 0 94 0;
#X connect 90 0 91 0;
#X connect 91 0 93 0;
#X connect 92 0 90 0;
#X connect 93 0 7 0;
#X restore 109 133 pd read-windows;
#X obj 137 543 tabsend~ prev-imag;
#X obj 136 567 tabsend~ prev-real;
#X obj 20 8 tabreceive~ prev-real;
#X obj 73 29 tabreceive~ prev-imag;
#X text 272 5 recall previous output amplitude. Its phase will be added
to the phase difference we measure from two windows in the the recorded
sound.;
#X obj 121 69 *~;
#X obj 89 69 *~;
#X obj 89 91 +~;
#X obj 159 94 q8_rsqrt~;
#X obj 159 71 +~ 1e-20;
#X obj 73 119 *~;
#X obj 19 118 *~;
#X obj 181 290 r lock;
#X obj 29 245 lrshift~ 1;
#X obj 24 269 lrshift~ -1;
#X obj 141 245 lrshift~ 1;
#X obj 133 269 lrshift~ -1;
#X obj 35 300 *~;
#X obj 159 312 *~;
#X obj 19 325 +~;
#X obj 125 331 +~;
#X text 247 66 divide by the magnitude to make a unit-magnitude complex
amplitude (phase only). The 1e-20 is to prevent overflows. q8_rsqrt~
is reciprocal square root.;
#X text 247 165 Take FT of the window in back. Multiply its conjugate
by the normalized previous output. The result has the magnitude of
the input sound and phase (previous output phase) minus (back window
phase).;
#X text 249 370 Normalize again \, this time taking care to salt each
channel with 1e-15 so that we get a unit complex number even if everything
was zero heretofore.;
#X text 288 427 Now take the FT of the forward window and multiply
it by the unit complex number from above. The magnitude will be that
of the forward window and the phase will be the previous output phase
plus the phase difference between the two analysis windows -- except
that if "lock" is on \, they will be modified to agree progressively
better with the inter-channel phase relationships of the input.;
#X text 249 242 If "lock" is on \, encourage neighboring channels to
stay in phase by adding the two neighboring complex amplitudes. The
result will tend toward the channel with the strongest amplitude. If
the phase relationships between channels in the output and those in
the input are in parallel \, then neighboring channels of the quotient
will all have the same phase and this will not change any phases. (lrshift
shifts the signal to the left or right depending on its argument.)
;
#X text 387 560 'set' message to block;
#X text 390 577 allows variable size;
#X text 259 126 Read two windows \, one 1/4 length behind the other
\, of the input sound \, with Hann window function (see inside).;
#X connect 0 0 2 1;
#X connect 1 0 2 0;
#X connect 2 0 35 0;
#X connect 2 0 15 0;
#X connect 3 0 5 1;
#X connect 4 0 5 0;
#X connect 5 0 34 0;
#X connect 5 0 15 1;
#X connect 6 0 19 1;
#X connect 7 0 19 0;
#X connect 8 0 10 1;
#X connect 9 0 10 0;
#X connect 10 0 48 0;
#X connect 10 0 47 0;
#X connect 10 0 53 0;
#X connect 11 0 18 1;
#X connect 12 0 16 0;
#X connect 13 0 1 1;
#X connect 13 0 3 1;
#X connect 13 1 0 1;
#X connect 13 1 4 1;
#X connect 14 0 9 1;
#X connect 14 0 7 1;
#X connect 14 1 6 1;
#X connect 14 1 8 1;
#X connect 15 0 26 0;
#X connect 17 0 18 0;
#X connect 18 0 32 0;
#X connect 19 0 49 0;
#X connect 19 0 50 0;
#X connect 19 0 54 0;
#X connect 20 0 1 0;
#X connect 20 0 4 0;
#X connect 21 0 0 0;
#X connect 21 0 3 0;
#X connect 22 0 28 0;
#X connect 23 0 31 0;
#X connect 25 0 17 1;
#X connect 25 0 17 0;
#X connect 25 0 20 0;
#X connect 26 0 12 0;
#X connect 27 0 26 1;
#X connect 28 0 12 1;
#X connect 29 0 30 0;
#X connect 31 0 24 0;
#X connect 32 0 20 1;
#X connect 32 0 21 1;
#X connect 33 0 14 0;
#X connect 33 1 13 0;
#X connect 36 0 40 1;
#X connect 36 0 40 0;
#X connect 36 0 45 0;
#X connect 37 0 39 1;
#X connect 37 0 39 0;
#X connect 37 0 44 0;
#X connect 39 0 41 1;
#X connect 40 0 41 0;
#X connect 41 0 43 0;
#X connect 42 0 44 1;
#X connect 42 0 45 1;
#X connect 43 0 42 0;
#X connect 44 0 8 0;
#X connect 44 0 7 0;
#X connect 45 0 9 0;
#X connect 45 0 6 0;
#X connect 46 0 51 1;
#X connect 46 0 52 1;
#X connect 47 0 51 0;
#X connect 48 0 51 0;
#X connect 49 0 52 0;
#X connect 50 0 52 0;
#X connect 51 0 53 1;
#X connect 52 0 54 1;
#X connect 53 0 25 0;
#X connect 54 0 11 0;
#X connect 54 0 11 1;
#X connect 54 0 21 0;
#X restore 44 245 pd fft-analysis;
#N canvas 265 60 647 735 phase-tables 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array prev-imag 4096 float 0;
#X coords 0 1000 4096 -1000 400 300 1;
#X restore 169 326 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array prev-real 4096 float 0;
#X coords 0 500 4096 -500 400 300 1;
#X restore 170 17 graph;
#X restore 455 245 pd phase-tables;
#X obj 509 79 s transpo;
#X text 179 105 hundredths;
#X text 404 100 normal;
#N canvas 466 162 565 454 hann-window 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-hann 4096 float 0;
#X coords 0 1 4095 0 300 100 1;
#X restore 82 311 graph;
#X obj 378 165 osc~;
#X obj 378 190 *~ -0.5;
#X obj 378 214 +~ 0.5;
#X obj 331 247 tabwrite~ \$0-hann;
#X obj 37 88 r window-size;
#X obj 38 173 /;
#X obj 127 142 samplerate~;
#X obj 38 251 s window-sec;
#X obj 177 204 swap;
#X obj 177 228 /;
#X obj 177 252 s window-hz;
#X obj 49 201 * 1000;
#X obj 49 228 s window-msec;
#X obj 38 115 t f b f;
#X msg 173 92 resize \$1;
#X obj 173 116 s \$0-hann;
#X obj 330 105 r window-hz;
#X msg 382 130 0;
#X obj 330 131 t f b;
#X text 15 8 calculate Hann window table (variable window size) and
constants window-hz (fundamental frequency of analysis) \, window-sec
and window-msec (analysis window size in seconds and msec).;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 5 0 14 0;
#X connect 6 0 8 0;
#X connect 6 0 12 0;
#X connect 7 0 6 1;
#X connect 7 0 9 1;
#X connect 9 0 10 0;
#X connect 9 1 10 1;
#X connect 10 0 11 0;
#X connect 12 0 13 0;
#X connect 14 0 6 0;
#X connect 14 0 9 0;
#X connect 14 1 7 0;
#X connect 14 2 15 0;
#X connect 15 0 16 0;
#X connect 17 0 19 0;
#X connect 18 0 1 1;
#X connect 19 0 1 0;
#X connect 19 1 4 0;
#X connect 19 1 18 0;
#X restore 455 269 pd hann-window;
#N canvas 25 116 694 447 insample 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-sample 617400 float 0;
#X coords 0 1 617399 -1 400 150 1;
#X restore 281 135 graph;
#X obj 28 133 r read-sample;
#X obj 28 184 unpack s f;
#X obj 28 294 soundfiler;
#X text 365 360 read a sample;
#X obj 285 359 loadbang;
#X obj 28 210 t s b;
#X obj 84 209 symbol \$0-sample;
#X obj 28 245 pack s s;
#X msg 28 270 read -resize \$1 \$2;
#X obj 83 156 44100;
#X obj 28 157 t a b;
#X obj 38 318 s \$0-samplength;
#X obj 125 184 s \$0-insamprate;
#X obj 28 357 /;
#X obj 28 381 * 1000;
#X obj 28 404 s \$0-samp-msec;
#X obj 66 357 r \$0-insamprate;
#X obj 29 70 hip~ 5;
#X obj 29 46 adc~ 1;
#X obj 29 9 inlet;
#X obj 91 46 samplerate~;
#X obj 29 93 tabwrite~ \$0-sample;
#X obj 91 70 s \$0-insamprate;
#X obj 276 20 inlet;
#X obj 276 42 openpanel;
#X obj 276 67 s read-sample;
#X msg 309 385 \; read-sample finalguitarsample.wav;
#X connect 1 0 11 0;
#X connect 2 0 6 0;
#X connect 2 1 13 0;
#X connect 3 0 12 0;
#X connect 3 0 14 0;
#X connect 5 0 27 0;
#X connect 6 0 8 0;
#X connect 6 1 7 0;
#X connect 7 0 8 1;
#X connect 8 0 9 0;
#X connect 9 0 3 0;
#X connect 10 0 13 0;
#X connect 11 0 2 0;
#X connect 11 1 10 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 17 0 14 1;
#X connect 18 0 22 0;
#X connect 19 0 18 0;
#X connect 20 0 21 0;
#X connect 20 0 19 0;
#X connect 21 0 23 0;
#X connect 24 0 25 0;
#X connect 25 0 26 0;
#X restore 456 221 pd insample;
#X floatatom 567 221 5 0 0 0 - #0-samp-msec -;
#X obj 456 180 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X text 475 179 <- record;
#X obj 70 148 s location;
#X obj 182 148 s speed;
#X obj 277 127 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X obj 277 149 s rewind;
#X msg 362 51 200;
#X msg 360 99 100;
#X msg 360 121 20;
#X text 401 76 contract;
#X text 405 121 expand;
#X text 505 34 detune;
#X text 70 71 location;
#X text 67 87 (stops;
#X text 72 102 motion);
#X text 180 89 motion in;
#X text 619 220 length \, msec;
#X floatatom 622 160 5 0 0 0 - window-size -;
#X msg 622 48 512;
#X msg 622 70 1024;
#X msg 622 92 2048;
#X msg 622 114 4096;
#X obj 622 136 s window-size;
#X text 622 15 window size \,;
#X text 622 30 samples;
#X obj 360 148 s auto;
#X obj 566 57 bng 15 250 50 0 no-detune empty empty 0 -6 0 8 -262144
-1 -1;
#X obj 550 201 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X text 481 199 file ->;
#X floatatom 291 62 5 0 0 0 - - -;
#X obj 439 445 vsl 15 128 10 8000 0 1 empty empty 0 -9 0 0 1.65798e+07
-262130 -1 -1 6500 0;
#X floatatom 352 624 5 0 0 0 - - -;
#N canvas 310 108 986 609 fft 0;
#X obj 18 500 *~;
#X obj 291 455 *~;
#X obj 258 454 *~;
#X obj 356 456 *~;
#X obj 324 455 *~;
#X obj 324 477 +~;
#X obj 258 479 -~;
#X obj 560 383 *~;
#X obj 54 124 *~;
#X obj 22 124 *~;
#X obj 22 145 +~;
#X obj 325 82 *~;
#X obj 293 82 *~;
#X obj 608 312 *~;
#X obj 576 312 *~;
#X obj 93 63 *~;
#X obj 18 522 outlet~;
#X obj 18 475 *~;
#X obj 126 63 inlet~;
#X obj 93 84 rfft~;
#X obj 18 451 rifft~;
#X obj 576 334 rsqrt~;
#X obj 293 103 +~;
#X obj 484 383 *~;
#X obj 56 499 sig~ 0.0002;
#N canvas 367 321 699 396 decision 0;
#X obj 49 101 inlet~;
#X obj 50 341 outlet~;
#X obj 50 183 -~;
#X obj 50 226 clip~ 0 1;
#X obj 50 204 *~ 1e+20;
#X obj 196 98 inlet~;
#X text 137 213 stronger than;
#X text 139 228 old one;
#X obj 274 202 -~;
#X obj 288 177 lrshift~ 1;
#X obj 274 250 clip~ 0 1;
#X obj 274 228 *~ 1e+20;
#X obj 450 202 -~;
#X obj 450 250 clip~ 0 1;
#X obj 450 228 *~ 1e+20;
#X obj 464 177 lrshift~ -1;
#X obj 50 283 *~;
#X obj 50 312 *~;
#X text 135 199 1 if new signal;
#X text 55 73 new;
#X text 203 70 old;
#X text 51 12 Choose whether to replace the "lod" signal with the "new"
one. The "new" one must be stronger than the old one and also must
be stronger than its two neighboring channels;
#X text 267 283 1 if we're louder than neighbor;
#X connect 0 0 2 0;
#X connect 0 0 9 0;
#X connect 0 0 8 0;
#X connect 0 0 12 0;
#X connect 0 0 15 0;
#X connect 2 0 4 0;
#X connect 3 0 16 0;
#X connect 4 0 3 0;
#X connect 5 0 2 1;
#X connect 8 0 11 0;
#X connect 9 0 8 1;
#X connect 10 0 16 1;
#X connect 11 0 10 0;
#X connect 12 0 14 0;
#X connect 13 0 17 1;
#X connect 14 0 13 0;
#X connect 15 0 12 1;
#X connect 16 0 17 0;
#X connect 17 0 1 0;
#X restore 23 172 pd decision;
#X obj 576 356 *~;
#N canvas 276 481 755 363 divide-by-prev 0;
#X obj 283 99 inlet~;
#X obj 385 101 inlet~;
#X obj 284 249 outlet~;
#X obj 386 249 outlet~;
#X obj 107 251 outlet~;
#X obj 208 253 outlet~;
#X obj 250 180 *~;
#X obj 217 180 *~;
#X obj 182 181 *~;
#X obj 149 181 *~;
#X obj 149 203 +~;
#X obj 217 202 -~;
#X obj 92 49 tabreceive~ \$0-last-real;
#X obj 190 72 tabreceive~ \$0-last-imag;
#X connect 0 0 2 0;
#X connect 0 0 9 0;
#X connect 0 0 6 0;
#X connect 1 0 3 0;
#X connect 1 0 8 0;
#X connect 1 0 7 0;
#X connect 6 0 11 1;
#X connect 7 0 11 0;
#X connect 8 0 10 1;
#X connect 9 0 10 0;
#X connect 10 0 4 0;
#X connect 11 0 5 0;
#X connect 12 0 9 1;
#X connect 12 0 7 1;
#X connect 13 0 8 1;
#X connect 13 0 6 1;
#X restore 603 192 pd divide-by-prev;
#N canvas 650 183 602 327 switch 0;
#X obj 19 163 inlet~;
#X obj 107 99 inlet~;
#X obj 169 100 inlet~;
#X obj 273 97 inlet~;
#X obj 333 97 inlet~;
#X obj 367 185 -~;
#X obj 338 231 +~;
#X obj 372 229 *~;
#X obj 250 182 -~;
#X obj 220 228 +~;
#X obj 254 228 *~;
#X obj 219 278 outlet~;
#X obj 338 274 outlet~;
#X text 46 28 switch between two pairs of inputs. If first inlet is
one \, take the left-hand pair \, otherwise the right-hand one.;
#X text 15 140 switch;
#X text 92 76 pass this if one;
#X text 269 77 pass this if zero;
#X connect 0 0 10 1;
#X connect 0 0 7 1;
#X connect 1 0 8 0;
#X connect 2 0 5 0;
#X connect 3 0 9 0;
#X connect 3 0 8 1;
#X connect 4 0 6 0;
#X connect 4 0 5 1;
#X connect 5 0 7 0;
#X connect 6 0 12 0;
#X connect 7 0 6 1;
#X connect 8 0 10 0;
#X connect 9 0 11 0;
#X connect 10 0 9 1;
#X restore 327 275 pd switch;
#N canvas 650 183 602 327 switch 0;
#X obj 19 163 inlet~;
#X obj 107 99 inlet~;
#X obj 169 100 inlet~;
#X obj 273 97 inlet~;
#X obj 333 97 inlet~;
#X obj 367 185 -~;
#X obj 338 231 +~;
#X obj 372 229 *~;
#X obj 250 182 -~;
#X obj 220 228 +~;
#X obj 254 228 *~;
#X obj 219 278 outlet~;
#X obj 338 274 outlet~;
#X text 46 28 switch between two pairs of inputs. If first inlet is
one \, take the left-hand pair \, otherwise the right-hand one.;
#X text 15 140 switch;
#X text 92 76 pass this if one;
#X text 269 77 pass this if zero;
#X connect 0 0 10 1;
#X connect 0 0 7 1;
#X connect 1 0 8 0;
#X connect 2 0 5 0;
#X connect 3 0 9 0;
#X connect 3 0 8 1;
#X connect 4 0 6 0;
#X connect 4 0 5 1;
#X connect 5 0 7 0;
#X connect 6 0 12 0;
#X connect 7 0 6 1;
#X connect 8 0 10 0;
#X connect 9 0 11 0;
#X connect 10 0 9 1;
#X restore 484 266 pd switch;
#X obj 655 270 r revtime;
#X obj 54 476 tabreceive~ \$0-hann;
#X obj 94 35 tabreceive~ \$0-hann;
#X obj 505 112 tabreceive~ \$0-inc-real;
#X obj 587 134 tabreceive~ \$0-inc-imag;
#X obj 752 220 tabsend~ \$0-last-imag;
#X obj 702 243 tabsend~ \$0-last-real;
#X obj 559 426 tabsend~ \$0-inc-imag;
#X obj 484 449 tabsend~ \$0-inc-real;
#X msg 665 293 set \$1;
#X obj 665 317 s revtime-set;
#X obj 800 483 loadbang;
#X msg 800 509 \; pd dsp 1 \; window-size 4096 \; revtime 20;
#X obj 800 411 r window-size;
#X msg 800 433 set \$1 4;
#X obj 800 455 block~;
#X obj 655 341 expr 1 - 0.2/max(0.2 \, $f1);
#X text 20 206 choose whether to;
#X text 18 224 punch in new (amplitude \,;
#X text 16 243 increment) pair;
#X obj 367 26 tabreceive~ \$0-amp-real;
#X obj 443 50 tabreceive~ \$0-amp-imag;
#X obj 325 537 tabsend~ \$0-amp-imag;
#X obj 258 560 tabsend~ \$0-amp-real;
#X text 361 6 previous output amplitude \, encoding both magnitude
and phase;
#X text 453 87 previous phase increment (unit-magnitude complex number)
;
#X obj 506 134 +~ 1e-15;
#X obj 366 50 +~ 1e-15;
#X text 363 482 propagate amplitudes by multiplying in the;
#X text 361 499 increments \, which advance the phase and drop;
#X text 365 514 magnitude according to revtime.;
#X text 608 370 normalize increments between 0 and;
#X text 606 388 1 according to revtime.;
#X text 78 453 IFFT and output;
#X connect 0 0 16 0;
#X connect 1 0 6 1;
#X connect 2 0 6 0;
#X connect 3 0 5 1;
#X connect 4 0 5 0;
#X connect 5 0 52 0;
#X connect 6 0 53 0;
#X connect 7 0 1 0;
#X connect 7 0 3 0;
#X connect 7 0 37 0;
#X connect 8 0 10 1;
#X connect 9 0 10 0;
#X connect 10 0 25 0;
#X connect 11 0 22 1;
#X connect 12 0 22 0;
#X connect 13 0 21 0;
#X connect 14 0 21 0;
#X connect 15 0 19 0;
#X connect 17 0 0 0;
#X connect 18 0 15 1;
#X connect 19 0 9 0;
#X connect 19 0 9 1;
#X connect 19 0 27 0;
#X connect 19 0 28 1;
#X connect 19 1 8 0;
#X connect 19 1 8 1;
#X connect 19 1 27 1;
#X connect 19 1 28 2;
#X connect 20 0 17 0;
#X connect 21 0 26 0;
#X connect 22 0 25 1;
#X connect 23 0 2 0;
#X connect 23 0 4 0;
#X connect 23 0 38 0;
#X connect 24 0 0 1;
#X connect 25 0 28 0;
#X connect 25 0 29 0;
#X connect 26 0 23 1;
#X connect 26 0 7 1;
#X connect 27 0 29 1;
#X connect 27 1 29 2;
#X connect 27 2 36 0;
#X connect 27 3 35 0;
#X connect 28 0 20 0;
#X connect 28 0 3 1;
#X connect 28 0 2 1;
#X connect 28 1 20 1;
#X connect 28 1 1 1;
#X connect 28 1 4 1;
#X connect 29 0 14 0;
#X connect 29 0 14 1;
#X connect 29 0 23 0;
#X connect 29 1 13 0;
#X connect 29 1 13 1;
#X connect 29 1 7 0;
#X connect 30 0 39 0;
#X connect 30 0 46 0;
#X connect 31 0 17 1;
#X connect 32 0 15 0;
#X connect 33 0 56 0;
#X connect 34 0 29 4;
#X connect 39 0 40 0;
#X connect 41 0 42 0;
#X connect 43 0 44 0;
#X connect 44 0 45 0;
#X connect 46 0 26 1;
#X connect 50 0 57 0;
#X connect 51 0 11 0;
#X connect 51 0 11 1;
#X connect 51 0 28 4;
#X connect 56 0 29 3;
#X connect 57 0 12 0;
#X connect 57 0 12 1;
#X connect 57 0 28 3;
#X restore 76 388 pd fft;
#X floatatom 511 739 0 0 1000 0 - revtime-set -;
#X obj 511 763 s revtime;
#N canvas 62 85 774 520 tables 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-last-real 2048 float 0;
#X coords 0 500 2048 -500 200 150 1;
#X restore 103 15 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-last-imag 2048 float 0;
#X coords 0 500 2048 500 200 150 1;
#X restore 497 6 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-amp-real 2048 float 0;
#X coords 0 500 2048 -500 200 150 1;
#X restore 105 185 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-amp-imag 2048 float 0;
#X coords 0 500 2048 -500 200 150 1;
#X restore 501 178 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-inc-real 2048 float 0;
#X coords 0 1 2048 -1 200 150 1;
#X restore 105 357 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-inc-imag 2048 float 0;
#X coords 0 1 2048 -1 200 150 1;
#X restore 503 342 graph;
#X restore 37 632 pd tables;
#X obj 495 435 vsl 15 128 0 20 0 0 empty empty empty 0 -9 0 10 -204786
-1 -1 4500 1;
#X text 27 680 low2 + (value - low1) * (high2 - low2) / (high1 - low1)
;
#X obj 434 669 vsl 15 128 1 20 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 1579 1;
#X obj 124 504 hip~ 200;
#X floatatom 537 576 5 0 0 0 - - -;
#X obj 98 869 dac~;
#N canvas 595 90 699 621 shift 0;
#X obj 101 162 pitchshifter~;
#X msg 264 150 transpose \$1;
#X floatatom 264 131 5 0 0 0 - - -;
#X floatatom 303 181 5 0 0 0 - - -;
#X msg 303 201 window \$1;
#X floatatom 235 230 5 0 0 0 - - -;
#X msg 235 249 delay \$1;
#X obj 100 314 outlet~;
#X obj 94 73 inlet~;
#X obj 263 69 inlet;
#X connect 0 0 7 0;
#X connect 1 0 0 1;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 4 0 0 1;
#X connect 5 0 6 0;
#X connect 6 0 0 1;
#X connect 8 0 0 0;
#X connect 9 0 2 0;
#X restore 131 417 pd shift;
#X floatatom 305 518 5 0 0 0 - - -;
#X text 185 609 max 687 low 15;
#X floatatom 363 515 5 0 0 0 - - -;
#X text 176 631 max 668 low 12;
#X text 150 718 max 10000 low 10;
#X floatatom 158 545 5 0 0 0 - - -;
#X floatatom 247 516 5 0 0 0 - - -;
#X obj 206 374 moses 0;
#X obj 326 376 moses 0;
#X floatatom 388 804 5 0 0 0 - - -;
#X obj 83 753 expr 8000+($f1-10)*(10-8000)/(8000-10);
#X text 525 308 finalguitarsample.wav = Guitar;
#X text 526 294 testsamplesopi3norm.wav = Piano;
#X text 527 321 flutest.wav = Flute;
#X obj 205 323 inlet;
#X obj 322 316 inlet;
#N canvas 317 247 450 352 inputSelect 0;
#X obj 81 84 inlet;
#X obj 157 143 inlet;
#X obj 309 135 inlet;
#X obj 110 218 switch 2;
#X obj 98 141 sel 0 1;
#X msg 136 177 1;
#X msg 98 178 2;
#X obj 266 216 switch 2;
#X obj 254 139 sel 0 1;
#X msg 292 175 1;
#X msg 254 176 2;
#X obj 153 85 r noisaLeft;
#X obj 297 87 r noisaRight;
#X obj 124 287 outlet;
#X obj 267 284 outlet;
#X connect 0 0 4 0;
#X connect 0 0 8 0;
#X connect 1 0 3 2;
#X connect 2 0 7 2;
#X connect 3 0 13 0;
#X connect 4 0 6 0;
#X connect 4 1 5 0;
#X connect 5 0 3 0;
#X connect 6 0 3 0;
#X connect 7 0 14 0;
#X connect 8 0 10 0;
#X connect 8 1 9 0;
#X connect 9 0 7 0;
#X connect 10 0 7 0;
#X connect 11 0 3 1;
#X connect 12 0 7 1;
#X restore 680 392 pd inputSelect;
#X obj 435 633 expr 1+($f1-10000)*(5-1)/(10-10000);
#X obj 20 524 *~;
#X obj 61 534 *~;
#X floatatom 268 382 5 0 0 0 - - -;
#X text 682 747 789 143;
#X obj 14 572 hip~ 2000;
#X obj 86 567 hip~ 2000;
#X obj 103 613 outlet~;
#X obj 619 468 expr 10000+($f1-150)*(10-10)/(670-150);
#X obj 196 572 expr 0+($f1-684)*(20-0)/(143-684);
#X floatatom 609 403 5 0 0 0 - - -;
#X obj 406 402 autoscale 8000 10;
#X obj 18 345 loadbang;
#X obj 581 522 autoscale 0 20;
#X obj 635 820 r myodyn;
#X obj 535 886 line~;
#X msg 634 856 \$1 800;
#X obj 77 829 *~;
#X obj 124 829 *~;
#X floatatom 694 848 5 0 0 0 - - -;
#X obj 503 800 loadbang;
#X msg 575 825 0.3;
#X msg 21 381 7;
#X connect 0 0 5 0;
#X connect 1 0 14 0;
#X connect 2 0 13 0;
#X connect 3 0 43 0;
#X connect 11 0 9 0;
#X connect 15 0 16 0;
#X connect 17 0 36 0;
#X connect 18 0 36 0;
#X connect 19 0 36 0;
#X connect 29 0 33 0;
#X connect 30 0 33 0;
#X connect 31 0 33 0;
#X connect 32 0 33 0;
#X connect 38 0 9 1;
#X connect 40 0 36 0;
#X connect 41 0 42 0;
#X connect 41 0 36 0;
#X connect 41 0 71 0;
#X connect 43 0 53 0;
#X connect 43 0 72 0;
#X connect 44 0 45 0;
#X connect 47 0 51 0;
#X connect 47 0 53 1;
#X connect 49 0 45 0;
#X connect 50 0 73 0;
#X connect 53 0 50 0;
#X connect 60 0 84 0;
#X connect 61 0 59 0;
#X connect 61 1 60 0;
#X connect 61 1 80 0;
#X connect 62 1 82 0;
#X connect 63 0 36 0;
#X connect 64 0 63 0;
#X connect 68 0 61 0;
#X connect 68 0 74 0;
#X connect 69 0 62 0;
#X connect 71 0 49 0;
#X connect 72 0 76 0;
#X connect 73 0 77 0;
#X connect 76 0 78 0;
#X connect 76 0 88 0;
#X connect 77 0 78 0;
#X connect 77 0 89 0;
#X connect 82 0 41 0;
#X connect 83 0 93 0;
#X connect 84 0 47 0;
#X connect 85 0 87 0;
#X connect 85 0 90 0;
#X connect 86 0 89 1;
#X connect 86 0 88 1;
#X connect 87 0 86 0;
#X connect 88 0 52 0;
#X connect 89 0 52 1;
#X connect 91 0 92 0;
#X connect 92 0 87 0;
#X connect 93 0 72 1;
#X connect 93 0 73 1;
